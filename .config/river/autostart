#!/usr/bin/sh
# @author nate zhou
# @since 2025
# river/autostart

# restart
killall -q  swaybg fcitx5 mpc

riverctl spawn "swaybg -i $HOME/.local/share/wallpaper -m fill"

riverctl spawn "fcitx5 -d"

# restart decided by scripts
riverctl spawn "$HOME/.local/bin/foots" # foot server

riverctl spawn "$HOME/.local/sbin/clsd"

# start if not running
pgrep 'i3bar-river' || riverctl spawn "i3bar-river"

pgrep 'swayidle' || riverctl spawn "swayidle -w timeout 600 'brightnessctl set 4% -s && pkill -SIGRTMIN+3 i3blocks' resume 'brightnessctl -r && pkill -SIGRTMIN+3 i3blocks' timeout 900 'swaylock' before-sleep 'swaylock'"

pgrep "gammastep" || riverctl spawn "gammastep -O 5000"

pgrep -f 'wl-paste --watch cliphist store' || riverctl spawn "wl-paste --watch cliphist store"

pgrep 'dunst' || riverctl spawn "dunst"

pgrep 'wob' || riverctl spawn "$HOME/.local/bin/wobd" # wob daemon
