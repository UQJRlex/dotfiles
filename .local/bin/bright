#!/usr/bin/sh
# bright
# @author nate zhou
# @since 2025
WOBFIFO="${XDG_RUNTIME_DIR}/wob.fifo"
BRIGHTNESS="${XDG_RUNTIME_DIR}/brightness.level"

bright_parse() {
    grep 'Current brightness' | tr '()' ' ' | cut -d' ' -f5 | sed 's/%//' | tee "$WOBFIFO" "$BRIGHTNESS" && kill -38 "$(cat ${XDG_RUNTIME_DIR}/damblocks.pid)";
}

bright_minus() {
    brightnessctl set 1%- | bright_parse
}

brigt_plus() {
    brightnessctl set 1%+ | bright_parse
}

while [ -n "$1" ]; do
    case "$1" in
        --minus)
            bright_minus
            ;;
        --plus)
            brigt_plus
            ;;
    esac
    shift
done
