#!/usr/bin/sh
# @author nate zhou
# @since 2025

color="#ffffff"
icon=""

level=$(bluetoothctl info | grep -m1 'Battery Percentage' | awk -F'[()]' '{print $2}')

[ -z "$level" ] && (echo "$icon"; echo; echo "#888888") && exit 0

case $BLOCK_BUTTON in
    1) notify-send -u low -r 3301 "$icon $(basename $0)" "$level% $(bluetoothctl info | grep 'Name: ' | cut -d' ' -f2-)"
        ;;
    2) footclient -T "Floating Term" bluetui>/dev/null &
        ;;
    3) notify-send -u low -r 3301 -t 1100 "$icon $(basename $0)" "refreshed" && pkill -SIGRTMIN+10 >/dev/null &
        ;;
esac

# ` `(U+2009) is the Thin Space
echo "$icon" "$level"%
echo
echo "$color"
