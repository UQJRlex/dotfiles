#!/usr/bin/env bash
# @author nate zhou
# @since 2025

icon=""
title="$(mpc current -f "[%title%]" | cut -c1-40 )"
[ -z "$title" ] && exit 0

# ` `(U+2009) is the Thin Space
echo "$icon" "<small>$title</small>"
echo

case $BLOCK_BUTTON in
    3) mpc toggle>/dev/null &
        ;;
    2) footclient ncmpcpp>/dev/null &
        ;;
    1) notify-send -u low -r 3301 "$icon $(basename $0)" "$(mpc current)"
        ;;
    4) mpc prev>/dev/null &
        ;;
    5) mpc next>/dev/null &
        ;;
esac

color="#eeeeee"
if [[ -z "$title" || "$(mpc status | sed -n '2p' )" =~ '[paused]' ]]; then
    color="#777777"
fi

echo "$color"
