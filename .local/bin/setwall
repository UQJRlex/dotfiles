#!/usr/bin/sh
# @author nate zhou
# @since 2023,2024,2025
# set wallpaper for i3wm/sway

# in ranger, '@` and type 'setwall` or `:shell setwall %s` will set the current selection as the new wallpaper
cp -f "$1" $HOME/.local/share/wallpaper;

# kill live wallpaper if it's is running
if pgrep -x "mpvpaper" > /dev/null
then
    killall -e "mpvpaper"
fi

# restart swaybg
killall swaybg
pgrep river>/dev/null && riverctl spawn "swaybg -i $HOME/.local/share/wallpaper -m fill"
pgrep sway >/dev/null  && swaymsg "output * bg ~/.local/share/wallpaper fill"
